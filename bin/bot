#!/usr/bin/python3

import os, sys ; sys.path.insert(0, os.getcwd())

from bot.csl import Console, os
from bot.ofn import format
from bot.prs import parse_cli
from bot.trm import execute

def main():
    import bot.obj
    bot.obj.wd = os.path.expanduser("~/.bot")
    cfg = parse_cli()
    c = Console()
    c.scan("irc")
    c.init(cfg.sets.mods)
    if cfg.txt:
        return c.cmd(cfg.otxt)
    c.start()
    c.wait()
     
execute(main)
os._exit(0)
